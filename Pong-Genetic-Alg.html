<canvas id="canvas"></canvas>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext('2d');

ctx.canvas.width = 650;
ctx.canvas.height = 500;


var neuralNetworks = [];
var players = [];
var balls = [];

var maxRandomWeight = 7;
var maxRandomBias = 7;

var maxNumOfNNs = 0;

function squish(input, method) {
	if(method == "sigmoid"){
		return 1 / (1 + Math.exp(-input));
    } else if (method == "tanh"){
    	return Math.tanh(input)
    }
}


//Just gives a random floating point number 
function getRandomFloat(min, max) {
  return Math.random() * (max - min) + min;
}

//Sets up player object-prototype
//Would normally just setup 2 players, but might add 4 player support
function Player(player) {
	this.x = player.x;
	this.y = player.y

	this.width = player.width;
	this.height = player.height;

	this.speed = player.speed;

	this.score = 0;

}


//Ball object-prototype
//Again, might have powerups or something if I get the basic game done early, might as well make it easy to have multiple balls
function Ball() {
	this.x = ctx.canvas.width / 2 - 5;
	this.y = ctx.canvas.height / 2 - 5;

	this.width = 10;
	this.height = 10;

	this.direction = Math.random() > 0.5 ? "left" : "right";
	this.speed = 4;
	this.angle = 0;
	this.velX = 0;
	this.velY = 0;

}

//Initializes the arrays above
//Please make sure the numberOfNeuralNetworks is even
function init(numberOfNeuralNetworks, weights1Length, biases1Length, weights2Length, biases2Length){
	

	//Keeps the maximum number of neural networks there should be.
	maxNumOfNNs = numberOfNeuralNetworks;
	for (var i = 0; i < numberOfNeuralNetworks; i++) {
    
    
    	if( i % 2 == 0){
        	//1 ball for every 2 players
    		balls.push( new Ball() );

			//Half the players on the left, half on the right		
    		players.push(new Player({
        		x: 0,
                y: ctx.canvas.height / 2 - 50,
                width: 20,
                height: 100,
                speed: 8

        
        	}) );
            
        } else {
    		players.push(new Player({
        		x: ctx.canvas.width - 20,
                y: ctx.canvas.height / 2 - 50,
                width: 20,
                height: 100,
                speed: 8

        
        	}) );
            
        }
    
    
    	var weights1 = [];
        var biases1 = [];
        var weights2 = [];
        var biases2 = [];
        

        //Automates the process of making random weights and biases
        
    	for(var z = 0; z < weights1Length; z ++){
        	weights1.push(getRandomFloat(-maxRandomWeight, maxRandomWeight));
        }
        
    	for(var a = 0; a < biases1Length; a ++){
        	biases1.push(getRandomFloat(-maxRandomBias, maxRandomBias));
        }
        
    	for(var b = 0; b < weights2Length; b ++){
        	weights2.push(getRandomFloat(-maxRandomWeight, maxRandomWeight));
        }
        
    	for(var c = 0; c < biases2Length; c++){
        	biases2.push(getRandomFloat(-maxRandomBias, maxRandomBias));
        }
        
        
        
    
		neuralNetworks.push({
			//10 inputs
            
			//100 weights
			weights1: weights1,
			//10 biases
			biases1: biases1,
			//30 weights
			weights2: weights2,
            //3 output biases
            biases2: biases2

			//3 output
		});
	}
}

init(4, 100, 10, 30, 3);

function frame(){
	ctx.fillStyle = "black";
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    
    for(var i = 0; i < players.length; i++){
    	ctx.fillStyle = "white";
        ctx.fillRect(players[i].x, players[i].y, players[i].width, players[i].height);
    }
    
    
    requestAnimationFrame(frame);
}

frame();
</script>
